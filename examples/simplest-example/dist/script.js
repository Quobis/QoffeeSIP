// Generated by CoffeeScript 1.4.0
(function() {

  $(function() {
    var api,
      _this = this;
    $("form").submit(function(e) {
      e.preventDefault();
      return false;
    });
    api = null;
    return $("#init").submit(function() {
      var options;
      options = {
        server: {
          ip: $("#server-ip").val(),
          port: $("#server-port").val()
        },
        mediaElements: {
          localMedia: $("#local"),
          remoteMedia: $("#remote")
        },
        onopen: function() {
          $("#register").submit(function() {
            return api.register($("#register-ext").val(), $("#register-pass").val());
          });
          return $("#call").submit(function() {
            return api.call($("#call-ext").val());
          });
        }
      };
      api = new API(options);
      return api.on("new-state", function(state, message) {
        switch (state) {
          case 6:
            return api.answer(message.branch);
          case 7:
          case 8:
            return $("#hangup").submit(function() {
              return api.hangup(message.branch);
            });
          case 9:
            return $("#hangup").off("submit");
        }
      });
    });
  });

}).call(this);
