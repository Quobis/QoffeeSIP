// Generated by CoffeeScript 1.4.0
(function() {

  $(function() {
    var _this = this;
    $("form").submit(function(e) {
      e.preventDefault();
      return false;
    });
    return $("#init").submit(function() {
      var options, qs;
      options = {
        server: {
          ip: $("#server-ip").val(),
          port: $("#server-port").val()
        },
        mediaElements: {
          localMedia: $("#local"),
          remoteMedia: $("#remote")
        },
        onopen: function() {
          $("#register").submit(function() {
            return qs.register($("#register-ext").val(), $("#register-pass").val());
          });
          return $("#call").submit(function() {
            return qs.call($("#call-ext").val());
          });
        }
      };
      qs = new QS(options);
      qs.on("qs-established", function(message) {
        return $("#hangup").submit(function() {
          return qs.hangup(message.branch);
        });
      });
      qs.on("qs-end-call", function() {
        return $("#hangup").off("submit");
      });
      return qs.on("qs-ringing", function(message) {
        alert(message.branch);
        return qs.answer(message.branch);
      });
    });
  });

}).call(this);
